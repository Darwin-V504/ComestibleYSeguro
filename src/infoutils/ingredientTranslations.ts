export const ingredientTranslations: Record<string, string> = {
  // Carnes/Proteínas
  'pollo': 'chicken',
  'carne': 'beef',
  'res': 'beef',
  'cerdo': 'pork',
  'cordero': 'lamb',
  'pescado': 'fish',
  'salmón': 'salmon',
  'atún': 'tuna',
  'camarón': 'shrimp',
  'camarones': 'shrimp',
  'tocino': 'bacon',
  'salchicha': 'sausage',
  'jamón': 'ham',
  'pavo': 'turkey',
  'pato': 'duck',
  'chorizo': 'chorizo',
  'salchichón': 'salami',
  
  // Lácteos/Huevos
  'leche': 'milk',
  'queso': 'cheese',
  'huevo': 'egg',
  'huevos': 'eggs',
  'mantequilla': 'butter',
  'crema': 'cream',
  'yogur': 'yogurt',
  'yogurt': 'yogurt',
  'crema agria': 'sour cream',
  'crema para batir': 'whipping cream',
  'cheddar': 'cheddar',
  'parmesano': 'parmesan',
  'mozzarella': 'mozzarella',
  'ricotta': 'ricotta',
  'feta': 'feta',
  'queso crema': 'cream cheese',
  
  // Verduras
  'cebolla': 'onion',
  'cebollas': 'onion',
  'ajo': 'garlic',
  'ajos': 'garlic',
  'tomate': 'tomato',
  'tomates': 'tomato',
  'papa': 'potato',
  'patata': 'potato',
  'papas': 'potato',
  'zanahoria': 'carrot',
  'zanahorias': 'carrot',
  'lechuga': 'lettuce',
  'espinaca': 'spinach',
  'espinacas': 'spinach',
  'brócoli': 'broccoli',
  'coliflor': 'cauliflower',
  'champiñón': 'mushroom',
  'champiñones': 'mushroom',
  'setas': 'mushroom',
  'pimiento': 'pepper',
  'pimientos': 'pepper',
  'pimiento morrón': 'bell pepper',
  'pimiento rojo': 'red pepper',
  'pimiento verde': 'green pepper',
  'chile': 'chili',
  'chiles': 'chili',
  'jalapeño': 'jalapeno',
  'maíz': 'corn',
  'elote': 'corn',
  'guisantes': 'peas',
  'arvejas': 'peas',
  'ejotes': 'green beans',
  'vainitas': 'green beans',
  'judías verdes': 'green beans',
  'apio': 'celery',
  'pepino': 'cucumber',
  'pepinos': 'cucumber',
  'calabacín': 'zucchini',
  'calabaza': 'pumpkin',
  'berenjena': 'eggplant',
  'rábano': 'radish',
  'remolacha': 'beet',
  'col': 'cabbage',
  'repollo': 'cabbage',
  'col rizada': 'kale',
  'acelga': 'chard',
  'alcachofa': 'artichoke',
  'espárrago': 'asparagus',
  
  // Frutas
  'manzana': 'apple',
  'manzanas': 'apple',
  'plátano': 'banana',
  'plátanos': 'banana',
  'banana': 'banana',
  'bananas': 'banana',
  'naranja': 'orange',
  'naranjas': 'orange',
  'limón': 'lemon',
  'limones': 'lemon',
  'lima': 'lime',
  'limas': 'lime',
  'fresa': 'strawberry',
  'fresas': 'strawberry',
  'piña': 'pineapple',
  'mango': 'mango',
  'mangos': 'mango',
  'aguacate': 'avocado',
  'aguacates': 'avocado',
  'aceituna': 'olive',
  'aceitunas': 'olive',
  'uva': 'grape',
  'uvas': 'grape',
  'sandía': 'watermelon',
  'melón': 'melon',
  'cantalupo': 'cantaloupe',
  'durazno': 'peach',
  'duraznos': 'peach',
  'ciruela': 'plum',
  'ciruelas': 'plum',
  'kiwi': 'kiwi',
  'kiwis': 'kiwi',
  'granada': 'pomegranate',
  'maracuyá': 'passion fruit',
  'guanábana': 'soursop',
  'papaya': 'papaya',
  'coco': 'coconut',
  
  // Granos/Cereales
  'arroz': 'rice',
  'pasta': 'pasta',
  'espagueti': 'spaghetti',
  'espaguetis': 'spaghetti',
  'fideos': 'noodles',
  'tallarines': 'noodles',
  'macarrones': 'macaroni',
  'lasaña': 'lasagna',
  'pan': 'bread',
  'pan integral': 'whole wheat bread',
  'baguette': 'baguette',
  'tortilla': 'tortilla',
  'tortillas': 'tortilla',
  'harina': 'flour',
  'harina de trigo': 'wheat flour',
  'harina integral': 'whole wheat flour',
  'avena': 'oats',
  'quinua': 'quinoa',
  'lentejas': 'lentils',
  'frijoles': 'beans',
  'frijol': 'beans',
  'frijoles negros': 'black beans',
  'frijoles pintos': 'pinto beans',
  'garbanzos': 'chickpeas',
  'garbanzo': 'chickpeas',
  'soya': 'soy',
  'soja': 'soy',
  'tofu': 'tofu',
  'tempeh': 'tempeh',
  'cebada': 'barley',
  'centeno': 'rye',
  'trigo': 'wheat',
  'maicena': 'cornstarch',
  'polenta': 'polenta',
  'sémola': 'semolina',
  'couscous': 'couscous',
  'bulgur': 'bulgur',
  
  // Líquidos/Bebidas
  'agua': 'water',
  'aceite': 'oil',
  'aceite de oliva': 'olive oil',
  'aceite vegetal': 'vegetable oil',
  'aceite de girasol': 'sunflower oil',
  'aceite de coco': 'coconut oil',
  'vinagre': 'vinegar',
  'vinagre balsámico': 'balsamic vinegar',
  'vinagre de manzana': 'apple cider vinegar',
  'salsa de soya': 'soy sauce',
  'salsa soya': 'soy sauce',
  'salsa de tomate': 'tomato sauce',
  'salsa inglesa': 'worcestershire sauce',
  'vino': 'wine',
  'vino tinto': 'red wine',
  'vino blanco': 'white wine',
  'cerveza': 'beer',
  'caldo': 'stock',
  'caldo de pollo': 'chicken stock',
  'caldo de res': 'beef stock',
  'caldo de verduras': 'vegetable stock',
  'consomé': 'broth',
  'leche de coco': 'coconut milk',
  'leche de almendra': 'almond milk',
  'jugo': 'juice',
  'jugo de naranja': 'orange juice',
  'jugo de limón': 'lemon juice',
  'jugo de lima': 'lime juice',
  'refresco': 'soda',
  'té': 'tea',
  'café': 'coffee',
  
  // Especias/Condimentos
  'sal': 'salt',
  'sal marina': 'sea salt',
  'pimienta': 'pepper',
  'pimienta negra': 'black pepper',
  'pimienta blanca': 'white pepper',
  'pimienta de cayena': 'cayenne pepper',
  'pimentón': 'paprika',
  'azúcar': 'sugar',
  'azúcar morena': 'brown sugar',
  'azúcar blanca': 'white sugar',
  'azúcar glas': 'powdered sugar',
  'miel': 'honey',
  'miel de abeja': 'honey',
  'miel de maple': 'maple syrup',
  'jarabe de maple': 'maple syrup',
  'mostaza': 'mustard',
  'mostaza dijon': 'dijon mustard',
  'catsup': 'ketchup',
  'ketchup': 'ketchup',
  'mayonesa': 'mayonnaise',
  'salsa tabasco': 'tabasco sauce',
  'salsa picante': 'hot sauce',
  'albahaca': 'basil',
  'orégano': 'oregano',
  'tomillo': 'thyme',
  'romero': 'rosemary',
  'perejil': 'parsley',
  'cilantro': 'cilantro',
  'eneldo': 'dill',
  'menta': 'mint',
  'hierbabuena': 'mint',
  'jengibre': 'ginger',
  'cúrcuma': 'turmeric',
  'comino': 'cumin',
  'canela': 'cinnamon',
  'nuez moscada': 'nutmeg',
  'clavo': 'clove',
  'clavos': 'clove',
  'cardamomo': 'cardamom',
  'anís': 'anise',
  'vainilla': 'vanilla',
  'extracto de vainilla': 'vanilla extract',
  'chocolate': 'chocolate',
  'chocolate amargo': 'dark chocolate',
  'chocolate con leche': 'milk chocolate',
  'chocolate blanco': 'white chocolate',
  'cacao': 'cocoa',
  'cacao en polvo': 'cocoa powder',
  'levadura': 'yeast',
  'polvo para hornear': 'baking powder',
  'bicarbonato': 'baking soda',
  'gelatina': 'gelatin',
  'agar agar': 'agar agar',
  
  // Frutos secos/Semillas
  'almendra': 'almond',
  'almendras': 'almond',
  'nuez': 'walnut',
  'nueces': 'walnut',
  'nuez de la india': 'cashew',
  'cacahuate': 'peanut',
  'cacahuates': 'peanut',
  'maní': 'peanut',
  'pistache': 'pistachio',
  'pistaches': 'pistachio',
  'avellana': 'hazelnut',
  'avellanas': 'hazelnut',
  'pecana': 'pecan',
  'pecanas': 'pecan',
  'piñón': 'pine nut',
  'piñones': 'pine nut',
  'semilla': 'seed',
  'semillas': 'seeds',
  'semilla de girasol': 'sunflower seed',
  'semilla de calabaza': 'pumpkin seed',
  'ajonjolí': 'sesame',
  'sésamo': 'sesame',
  'semilla de chía': 'chia seed',
  'semilla de linaza': 'flax seed',
  'coco rallado': 'shredded coconut',
  
  // Otros
  'pasta de tomate': 'tomato paste',
  'puré de tomate': 'tomato puree',
  'salsa para pasta': 'pasta sauce',
  'salsa pesto': 'pesto sauce',
  'salsa barbacue': 'barbecue sauce',
  'salsa teriyaki': 'teriyaki sauce',
  'salsa hoisin': 'hoisin sauce',
  'salsa de ostras': 'oyster sauce',
  'masa': 'dough',
  'masa para pizza': 'pizza dough',
  'masa para tarta': 'pie crust',
  'pan molido': 'breadcrumbs',
  'galleta': 'cookie',
  'galletas': 'cookies',
  'galleta salada': 'cracker',
  'galletas saladas': 'crackers',
  'oreo': 'cookie',
  'pretzel': 'pretzel',
  'palomitas': 'popcorn',
  'papas fritas': 'potato chips',
  'nacho': 'nacho',
  'nachos': 'nachos',
  'marshmallow': 'marshmallow',
  'malvavisco': 'marshmallow',
  'gel': 'gel',
  'colorante': 'food coloring',
  'esencia': 'essence',
  'almíbar': 'syrup',
  'merengue': 'meringue',
  'nata': 'whipped cream',
  'helado': 'ice cream',
  'yoghurt': 'yogurt',
};

// Mapa de ingredientes COMPUESTOS a su forma SIMPLE para la API
export const compoundToSimple: Record<string, string> = {
  'vinagre de manzana': 'vinegar',
  'vinagre balsámico': 'vinegar',
  'vinagre de vino': 'vinegar',
  'aceite de oliva': 'oil',
  'aceite vegetal': 'oil',
  'aceite de coco': 'oil',
  'caldo de pollo': 'chicken',
  'caldo de res': 'beef',
  'caldo de verduras': 'vegetable',
  'jugo de naranja': 'orange',
  'jugo de limón': 'lemon',
  'salsa de soya': 'soy sauce',
  'salsa de tomate': 'tomato',
  'pasta de tomate': 'tomato',
  'puré de tomate': 'tomato',
  'queso crema': 'cheese',
  'crema agria': 'cream',
  'pan integral': 'bread',
  'harina integral': 'flour',
  'azúcar morena': 'sugar',
  'azúcar blanca': 'sugar',
  'pimienta negra': 'pepper',
  'pimienta blanca': 'pepper',
  'leche de coco': 'milk',
  'leche de almendra': 'milk',
  'yogur de fresa': 'yogurt',
  'yogur natural': 'yogurt',
  'carne molida': 'beef',
  'pollo desmenuzado': 'chicken',
  'pescado fresco': 'fish',
  'tomate cherry': 'tomato',
  'cebolla morada': 'onion',
  'pimiento rojo': 'pepper',
  'pimiento verde': 'pepper',
  'pimiento amarillo': 'pepper',
  'manzana verde': 'apple',
  'manzana roja': 'apple',
  'plátano macho': 'banana',
  'naranja valencia': 'orange',
  'limón persa': 'lemon',
};

// Mapa de ingredientes que NO son aceptados por la API (palabras a ignorar)
export const unsupportedWords: string[] = [
  'de', 'con', 'para', 'y', 'en', 'al', 'del', 'la', 'el', 'las', 'los',
  'cider', 'balsamic', 'extra', 'virgin', 'light', 'dark', 'fresh',
  'frozen', 'canned', 'dried', 'powdered', 'ground', 'whole', 'sliced',
  'chopped', 'minced', 'grated', 'shredded', 'cubed', 'diced', 'molida',
  'desmenuzado', 'fresco', 'cherry', 'morada', 'rojo', 'verde', 'amarillo',
  'valencia', 'persa', 'macho', 'natural'
];

// Función para traducir ingredientes
export const translateIngredient = (spanishName: string): string => {
  const lowerName = spanishName.toLowerCase().trim();
  
  // 1. Verificar si es un ingrediente compuesto que necesita simplificación
  if (compoundToSimple[lowerName]) {
    console.log(`Simplificando "${spanishName}" a "${compoundToSimple[lowerName]}"`);
    return compoundToSimple[lowerName];
  }
  
  // 2. Buscar coincidencia exacta en el mapa principal
  if (ingredientTranslations[lowerName]) {
    return ingredientTranslations[lowerName];
  }
  
  // 3. Extraer palabras clave y filtrar palabras no soportadas
  const words = lowerName.split(' ').filter(word => 
    word.length > 2 && !unsupportedWords.includes(word)
  );
  
  // 4. Buscar cada palabra en el diccionario
  for (const word of words) {
    if (ingredientTranslations[word]) {
      console.log(`Encontrado "${word}" en "${spanishName}" -> "${ingredientTranslations[word]}"`);
      return ingredientTranslations[word];
    }
  }
  
  // 5. Buscar coincidencia parcial
  for (const [spanish, english] of Object.entries(ingredientTranslations)) {
    if (lowerName.includes(spanish) && !unsupportedWords.some(unsup => spanish.includes(unsup))) {
      console.log(`Coincidencia parcial: "${spanishName}" -> "${english}"`);
      return english;
    }
  }
  
  // 6. Si no se encuentra, usar la primera palabra válida
  const validWord = words.find(word => word.length > 3);
  if (validWord) {
    console.log(` Usando palabra directa como fallback: "${validWord}"`);
    return validWord;
  }
  
  // 7. Último recurso: devolver el original (sin palabras no soportadas)
  const filteredName = lowerName.split(' ')
    .filter(word => !unsupportedWords.includes(word))
    .join(' ');
    
  if (filteredName && filteredName !== lowerName) {
    console.log(`Filtrado "${spanishName}" a "${filteredName}"`);
    return filteredName;
  }
  
  // 8. Si todo falla, devolver el nombre completo
  console.log(` No se pudo traducir adecuadamente: "${spanishName}"`);
  return lowerName;
};

// Función para traducir múltiples ingredientes
export const translateIngredients = (spanishIngredients: string[]): string[] => {
  return spanishIngredients.map(translateIngredient);
};

// Función para debug
export const debugIngredients = (spanishIngredients: string[]): void => {
  console.log(' ingredientes traducidos');
  spanishIngredients.forEach(ing => {
    const translated = translateIngredient(ing);
    console.log(`"${ing}" -> "${translated}"`);
  });
  console.log('si');
};

// Lista de ingredientes en inglés para referencia
export const commonEnglishIngredients = [
  'chicken', 'beef', 'pork', 'fish', 'shrimp', 'egg', 'milk', 'cheese',
  'butter', 'onion', 'garlic', 'tomato', 'potato', 'carrot', 'rice',
  'pasta', 'bread', 'flour', 'sugar', 'salt', 'pepper', 'oil', 'water',
  'vinegar', 'wine', 'beer', 'cream', 'yogurt', 'honey', 'mustard',
  'ketchup', 'mayonnaise', 'basil', 'oregano', 'thyme', 'rosemary'
];